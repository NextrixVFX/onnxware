
using VRC;
using VRC.Core;
using onnxware.Components.Tools;

namespace onnxware.Components.Exploits
{
    public static class ForceClone
    {
        private static Player player;
        private static PipelineManager avatarPipelineManager;

        public static void DoForceClone()
        {
            player = PlayerUtil.GetSelectedPlayer();
            avatarPipelineManager = player.transform.GetComponentInChildren<PipelineManager>();

            string avatarId = avatarPipelineManager.blueprintId;

            SimpleAvatarPedestal pedestal = new SimpleAvatarPedestal();
            pedestal.Method_Private_Void_ApiAvatar_0(new ApiAvatar
            {
                id = avatarId,
                name = "OdiumBotAvatar",
                authorName = "OdiumBot",
                imageUrl = "https://example.com/avatar.png"
            });
            
            pedestal.Method_Public_Void_0();
            
            ConsoleAPI.Logger.Msg($"Cloning avatar ID: {avatarId}");

        }
    }
}
